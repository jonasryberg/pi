
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Jonas@pi</title>
  <meta name="author" content="Jonas Ryberg">

  
  <meta name="description" content="Tidigt i höstas köpte jag en Piglow och kopplade in den på min Pi. Men jag kom aldrig längre än att testa att blinka lite med Scratch. Men, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://pi.ryberg.org">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Jonas@pi" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-46864965-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Jonas@pi</a></h1>
  
    <h2>Bloggade nörderier.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:pi.ryberg.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blogg</a></li>
  <li><a href="/blog/archives">Arkiv</a></li>
  <li><a href="/om">Om bloggen</a></li>
  <li><a href="/om/mig.html">Om mig</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/09/python-piglow-och-utomhustemperatur/">Python, PiGlow och utomhustemperatur</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-09T19:54:34+00:00" pubdate data-updated="true">2014-02-09</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="https://pi.ryberg.org/images/piglowtmp.jpg" title="Piglow visar temperaturen" alt="Piglow" /></p>

<p>Tidigt i höstas köpte jag en <a href="http://shop.pimoroni.com/products/piglow">Piglow</a> och kopplade in den på min Pi. Men jag kom aldrig längre än att testa att <a href="http://cymplecy.wordpress.com/2013/08/12/scratch-gpio-piglow-support/">blinka lite med Scratch</a>. Men, inspirerad av <a href="http://www.howtogeek.com/140063/build-an-led-indicator-with-a-raspberry-pi-for-email-weather-or-anything/all/">den här killen</a> som använder sin Pi och en lysdiod för att ha koll på vädret och <a href="http://issabove.com/iss-above-and-the-raspberry-pi/">den här snubben</a> som använder sin Piglow för att veta när internationella rymdstationen är på ingång, så tänkte jag att det var dags att se om jag kunde hitta på några liknande projekt.</p>

<p>Första testet var att skriva ett program som kunde använda information från <a href="http://www.wunderground.com/weather/api/">Wetherunderground</a> API för att berätta hur varmt eller kallt det känns ute. Jag utgick från <a href="http://www.howtogeek.com/140063/build-an-led-indicator-with-a-raspberry-pi-for-email-weather-or-anything/all/">den här beskrivningen</a> för att hantera anropen till Wunderground. Sedan gällde det att komma på ett fiffigt sätt att visa tempratur med de 18 lysdioderna på Piglow. Jag bestämde mig för ett system där blå led motsvarade -1 grad, vit led -10 grader, grön led 1 grad, röd led 10 grader och gul led 5 grader.</p>

<p>Python-koden nedan kräver biblioteket PyGlow för att fungera tillsammans med Piglow. Det kan hämtas <a href="https://github.com/benleb/PyGlow">här</a>.</p>

<p>Så här ser skriptet ut, glöm inte att fylla i din egen api-nyckel från Wetherundergroud.</p>

<div><script src='https://gist.github.com/8775271.js'></script>
<noscript><pre><code># coding=latin1
# Feelometer - hämtar information om hur kallt vädret känns från wunderground och visar 
# den på en Raspberry pi med en PiGlow från Pimoroni
# 
# av Jonas Ryberg
# Kräver biblioteket PyGlow som hämtas på  https://github.com/benleb/PyGlow
#
# ------------------------------
# Så här ska dioderna på PiGlow tolkas
#
# blå led = -1
# vit led = -10
#
# grön led = 1
# röd led = 10
# gul led = 5
# ------------------------------

from urllib2 import urlopen
import json
from pyglow import PyGlow # importerar funktioner for att styra PiGlow
from time import sleep

pyglow = PyGlow()


# Hämta data för Stockholm från wunderground.com

req = urlopen('http://api.wunderground.com/api/din-api-nyckel/conditions/q/SE/stockholm.json')
parsed_json = json.load(req)
feelslike = int(parsed_json['current_observation']['feelslike_c'])

# Definierar variabler

styrka = 100
blue = 0
green = 0
yellow = 0
red = 0
white = 0

# feelslike = -3 # för test

# avgör vilka dioder som ska tändas


if feelslike == 0: #om nollgradigt
   blue = 1
   green = 1

if feelslike &gt; 0: #om plussgrader
   red = int(feelslike/10)
   yellow = int((feelslike-red*10)/5)
   green = feelslike-red*10-yellow*5
        
   if green &gt; 3:
      yellow = 0
      red = red + 1
      blue = 1
      green = 0
        
if feelslike &lt; 0: #om minusgrader
      feelslike = -feelslike
      white = int(feelslike/10)
      blue = feelslike - white*10
      if blue &gt; 3:
        white = white+1
        if blue == 4:
            green = 1
            yellow = 1
            blue = 0
        if blue == 5:
            yellow = 1
            blue = 0
        if blue == 6:
            yellow = 1
            blue = 1
        if blue &gt; 6:
            green = 10 - blue
            blue = 0

# för test
# -----------------------------
# print'blue = ' + str(blue)
# print'green = ' + str(green)
# print'yellow = ' + str(yellow)
# print'red = ' + str(red)
# print'white = ' + str(white)
# ------------------------------

'''
led-adresser

pyglow.led(18,100)#vit
pyglow.led(12,100)#vit
pyglow.led(6,100) #vit


pyglow.led(5,100) #blå
pyglow.led(11,100)#blå
pyglow.led(17,100)#blå

pyglow.led(16,100)#grön
pyglow.led(10,100)#grön
pyglow.led(4,100) #grön

pyglow.led(3,100) #gul  
pyglow.led(9,100) #gul
pyglow.led(15,100) #gul

pyglow.led(2,100) #orange
pyglow.led(8,100) #orange
pyglow.led(14,100) #orange

pyglow.led(1,100) #röd
pyglow.led(7,100) #röd
pyglow.led(13,100) #röd
'''

pyglow.all(0)

# tänd led

while white &gt; 0:
    pyglow.led((white*6),styrka)
    white = white - 1

start = 1
while red &gt; 0:
    pyglow.led(start,styrka)
    red = red -1
    start = start + 6

start = 3
while yellow &gt; 0:
    pyglow.led(start,styrka)
    yellow = yellow -1
    start = start + 6

start = 4
while green &gt; 0:
    pyglow.led(start,styrka)
    green = green -1
    start = start + 6

start = 5
while blue &gt; 0:
    pyglow.led(start,styrka)
    blue = blue - 1
    start = start + 6</code></pre></noscript></div>


<p>Om du vill att temperaturen ska uppdateras krävs såklart att skriptet körs med jämna intervall, till exempel med ett sk cron job. Mer info om hur du får igång ett sådant finns <a href="http://www.howtogeek.com/101288/how-to-schedule-tasks-on-linux-an-introduction-to-crontab-files/">här</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/25/rovarspraket-i-Python/">Rövarspråket i Python</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-25T17:35:02+00:00" pubdate data-updated="true">2014-01-25</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Jag har börjat gå igenom övningarna i Python hos <a href="http://www.codecademy.com/">Codeacademy</a>. Pedagogiskt och bra, men hur kul är det att skapa ett program för att skriva i Pylatin? Klassiska rövarspråket är att föredra tycker jag så jag satte ihop ett eget exempel.</p>

<div><script src='https://gist.github.com/8619200.js'></script>
<noscript><pre><code># coding=latin1
# Pythonskript för att skapa rövarspråk
# av Jonas Ryberg


print &quot;Rövarspråksgenerator&quot;



exit = &quot;J&quot;

while exit != &quot;N&quot; :
    woworordod = str()
    original = raw_input('Skriv in ett ord &gt; ')

    if len(original) &gt; 0 and original.isalpha():
    
        word = original.lower()
    
        letter_index = 0
    
        while letter_index &lt;= len(word)-1:
    
            letter = word[letter_index]
    
            if letter == &quot;a&quot; or letter == &quot;e&quot; or letter == &quot;i&quot; or letter == &quot;o&quot; or letter == &quot;u&quot;:
            
                woworordod = woworordod + letter
                letter_index = letter_index + 1
        
            else:
                woworordod = woworordod + letter + &quot;o&quot; + letter
                letter_index = letter_index + 1
            
            

    else:
        print 'inget ord eller mer än ett ord'
    
    print woworordod
    exit = raw_input(&quot;En gång till? (J/N) &gt;&quot;)</code></pre></noscript></div>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/07/nypressat-schackintresse/">Nypressat schackintresse</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-07T16:12:02+00:00" pubdate data-updated="true">2014-01-07</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Visserligen är <a href="http://ludemegames.com/chess2/">Schack 2 på gång</a>, men jag jobbar fortfarande vidare på att bemästra originalet. Arbetet har kommit igång efter att min äldste son börjat intressera sig för spelet och jag har blivit hans närmast tillgänglige motståndare.</p>

<p>För att få fart på det egna spelandet kan man givetvis ta ett vanligt schackdatorprogram till hjälp. Men roligare är att spela mot vänner. Under julhelgen har jag därför spelat ett tiotal matcher korrespondansschack med vänner och familj. Appen vi använt heter <a href="https://play.google.com/store/apps/details?id=chesspresso.client.android.f&amp;hl=en">Chesspresso</a> och finns för Androidtelefoner.</p>

<p>Det finns säkert en uppsjö liknande appar, men Chesspresso gör jobbet väl med ren design och enkla funktioner för att stega fram och tillbaka i ett parti, möjlighet att spara partierna och enkel statistik över hur matcherna gått. Det går att spela mot slumpvisa användare i nätverket, men jag har bara testat att spela mot vänner. Det är helt enkelt roligare att vinna eller förlora mot någon man känner. Appen kostar 25 kronor om man vill spela utan reklam. Med tanke på hur ful den är så är det värt priset.</p>

<p>Ytterligare en app som vi använt flitigt i jul är <a href="https://play.google.com/store/apps/details?id=com.Hefestus.ChessClock.Free&amp;hl=en">Real Chess Clock</a>. En enkel app som fungerar som en schackklocka och dessutom är gratis och utan irriterande reklam. Dock krävs betalning om alla funktioner ska användas.</p>

<p><img src="http://pi.ryberg.org/images/chesspresso.webp" alt="Chesspresso" />
<em>Chesspresso för digitalt korrespondansschack</em></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/05/ir-foto-med-pi-n/">Ir-foto med pi:n</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-05T19:05:01+00:00" pubdate data-updated="true">2014-01-05</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Pi-noir, Raspberry Pi-foundations kamera utan ir-filter har legat i min låda ett tag utan att jag egentligen haft tid att testa den. Men igår tog jag mig tid att montera den. Den fungerar egentligen precis på samma sätt och med samma kommandon som den vanliga kameran med det undantaget att Pi-noir saknar ir-filter framför kamerans sensor. Pi-kameran är precis som alla digitalkameror kännslig för ir-ljus. I normala fall stör det bildkvaliteten men vill man skapa fina effekter eller forografera i mörker kan det vara riktigt användbart.</p>

<p>Bilderna jag tog här hemma är dock inte mycket att yvas över. Roligast verkar det vara att fotografera utomhus med filter och mycket gröna växter. Jag nöjde mig med att plåta en pelargon.</p>

<p><img src="http://pi.ryberg.org/images/ir-blomma.jpg" alt="blomma fotad med ir-kamera" />
<em>Pelargon fotad med ir-kamera och blått filter</em></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/11/10/intervallfoto-2-0/">Intervallfoto 2.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-10T14:06:59+00:00" pubdate data-updated="true">2013-11-10</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I förra <a href="http://pi.ryberg.org/blog/2013/10/26/webbstyrd-pi-kamera/">inlägget</a> berättade jag hur jag och min bror biologen styrde min Raspberry pi-kamera via en webbserver. Nästa steg är att på ett enkelt sätt få den att ta intervallbilder för att skapa en enkel stop-motion-film. Tanken är förstås att kunna placera ut Pi:n på ett lämpligt ställe, kolla att allt ser bra ut genom att ta en bild och sedan sätta igång intervallfotot. För att göra det enklare ska vi också låta Pi:en räkna ut hur många bilder den behöver ta för att skapa en film av en viss längd.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/11/10/intervallfoto-2-0/">Läs mer &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/26/webbstyrd-pi-kamera/">Webbstyrd pi-kamera</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-26T14:06:59+00:00" pubdate data-updated="true">2013-10-26</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Regning oktoberlördag. Barnen är på utflykt och jag och <a href="http://www.anst.uu.se/marry118/">min bror biologen</a> bestämmer oss för att leka med Raspeberry Pi-cam. Tanken är att bygga en kamera som vi kan styra via en webbsida. Första steget är att installera en webbserver. Efter att ha strulat en bra stund med lighttpd, eftersom den enligt internets samlade visdom kräver mindre resurser än klassiska Apache, så väljer vi i alla fall Apache då den ger felmeddelanden som faktiskt kan tolkas.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/10/26/webbstyrd-pi-kamera/">Läs mer &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/18/leverans-av-liten-bit/">Leverans av liten bit</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-18T14:06:59+00:00" pubdate data-updated="true">2013-07-18</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://pi.ryberg.org/images/skakbit_i_antistat.jpg" alt="Skakbiten" /></p>

<p>Så kom den då till slut, <a href="blog/2013/07/10/sma-bitar-stora-problem/">skakbiten</a>. UPS försökte lämna den hemma hos mig vid sex tillfällen utan att lyckas.  Vi kom då överens om att de skulle försöka lämna den i sommarstugan i stället. Efter ett tag kom dock UPS på att den ligger i en “remote area”. Den fiffiga lösningen blev till slut Posten, som ju faktiskt har ett system för att leverera paketet också till oss som inte har en reception med personal hemma.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/10/sma-bitar-stora-problem/">Små bitar – stora problem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-10T14:06:59+00:00" pubdate data-updated="true">2013-07-10</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://pi.ryberg.org/images/skakbit.jpg" alt="Tandborstrobot" /></p>

<p>För några veckor sedan köpte jag ett paket Little bits till barnen. Tyvärr gick en av bitarna, den så kallade skakbiten, sönder nästan direkt.</p>

<p>Jag mejlade företagets support som beklagade att den gått sönder, bad mig be barnen vara mer försiktiga, och lovade att skicka en ny bit. Bra service med andra ord.</p>

<p>Nu väntar vi bara på att UPS ska lösa transporten. Första delen av vägen, den från Shenzen till Arlanda gick fort. Värre verkar det vara att leverera paketet hem till mig. UPS ska ha varit här fem gånger de senaste veckorna utan att ha lyckas, trots försök med lämnat telefonnummer, portkod och andra instruktioner. Men vem vet. Någon gång kanske våra vägar möts, mina och mannen/kvinnan från UPS.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/26/intervallfoto-med-rasoberry-pi/">Intervallfoto med Raspberry Pi</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-26T14:06:59+00:00" pubdate data-updated="true">2013-05-26</time>
        
      </p>
    
  </header>


  <div class="entry-content"><object width="640" height="360"><param name="movie" value="//www.youtube.com/v/2a77FLHoxE4?version=3&amp;hl=en_US"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="//www.youtube.com/v/2a77FLHoxE4?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="640" height="360" allowscriptaccess="always" allowfullscreen="true"></embed></object>


<p>Jag slog till och köpte den nya kameramodulen till Raspberry Pi när jag besökte Webhallen i Fruängen i går. Den ser inte mycket ut för världen och som kamera betraktat kan den närmast jämföras med en mycket enkel mobilkamera utan autofokus. Den monteras via en plattkabel direkt på datorkortet, allt som sedan krävs för att den ska fungera är en uppdatering av datorns firmware med: <code>sudo apt-get update</code>
och
<code>sudo apt-get upgrade</code>.</p></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/05/26/intervallfoto-med-rasoberry-pi/">Läs mer &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/21/emil-bygger-tandborstrobot/">Emil bygger tandborstrobot</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-21T14:06:59+00:00" pubdate data-updated="true">2013-05-21</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="../images/tandborstspoke-225x300.jpg" alt="Tandborstrobot" /></p>

<p>Jag köpte var sitt paket <a href="http://littlebits.com/">Littlebits</a> till barnen när jag besökte USA i veckan. Emil använde några av bitarna till att bygga en tandborstrobot.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Nypublicerat</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/09/python-piglow-och-utomhustemperatur/">Python, PiGlow och utomhustemperatur</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/25/rovarspraket-i-Python/">Rövarspråket i Python</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/07/nypressat-schackintresse/">Nypressat schackintresse</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/05/ir-foto-med-pi-n/">Ir-foto med pi:n</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/10/intervallfoto-2-0/">Intervallfoto 2.0</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Jonas Ryberg -
  <span class="credit">Tillagad med <a href="http://octopress.org">Octopress</a>, serverad på <a href="http://github.com">Github</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'piryberg';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
